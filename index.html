<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Birthday Surprise</title>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      /* Elegant cream + gold */
      --bg1:#fbf6ea;      /* cream */
      --bg2:#f3e7c6;      /* warm cream */
      --card:#ffffff;
      --text:#1f1a12;
      --muted:#5b5146;

      --gold:#c6a25a;     /* champagne gold */
      --gold2:#b8903f;    /* richer gold */
      --ink:#1f1a12;

      --wine:#6b1f3a;     /* emotional message color */
      --shadow: 0 18px 45px rgba(31, 26, 18, .16);
      --softShadow: 0 10px 28px rgba(31, 26, 18, .12);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 450px at 20% 10%, rgba(255,255,255,.85), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
      min-height:100vh;
    }

    .wrap{
      padding:16px;
      max-width:560px;
      margin:0 auto;
      position:relative;
      z-index:2;
    }

    .card{
      background:var(--card);
      border-radius:22px;
      box-shadow: var(--shadow);
      padding:22px 18px;
      margin:18px auto;
      position:relative;
      overflow:hidden;
      border:1px solid rgba(198,162,90,.22);
    }

    /* Elegant headline font for titles */
    .serif{
      font-family: ui-serif, "Georgia", "Times New Roman", serif;
      letter-spacing:.2px;
    }

    h1,h2,h3{ margin:0 0 10px 0; line-height:1.2; }

    .title{
      font-size:30px;
      font-weight:800;
      text-align:center;
      color: var(--ink);
    }
    .title .gold{
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .mail{
      text-align:center;
      margin-top:10px;
      font-size:16px;
      font-weight:900; /* bold */
      color:#000;      /* black */
    }

    .sub{
      text-align:center;
      color:var(--muted);
      margin:8px 0 14px 0;
      font-size:14px;
      font-weight:650;
    }

    .btn{
      appearance:none;
      border:none;
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      color:#fff;
      font-weight:850;
      padding:12px 16px;
      border-radius:14px;
      cursor:pointer;
      font-size:16px;
      width:100%;
      transition: transform .08s ease, filter .2s ease;
      box-shadow: 0 12px 28px rgba(184,144,63,.25);
    }
    .btn:hover{ filter: brightness(1.02); }
    .btn:active{ transform: scale(.985); }

    .hidden{ display:none !important; }

    /* Floating hearts + poppers */
    .float-layer{
      pointer-events:none;
      position:fixed;
      inset:0;
      overflow:hidden;
      z-index:1;
    }
    .float{
      position:absolute;
      bottom:-40px;
      font-size:22px;
      opacity:.9;
      animation: rise linear forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.10));
    }
    @keyframes rise{
      to{
        transform: translateY(-112vh) translateX(var(--dx));
        opacity:0;
      }
    }

    /* Envelope */
    .env-wrap{
  display:flex;
  justify-content:center;
  margin:14px 0 6px;
  position:relative;
  padding-top:74px;   /* reserves space for the overlay button */
}
    .envelope{
      width:340px;
      max-width:100%;
      height:220px;
      position:relative;
      border-radius:18px;
      background: linear-gradient(180deg, #fff, #fff9eb);
      box-shadow: var(--softShadow);
      overflow:hidden;
      border:1px solid rgba(198,162,90,.25);
    }
    .env-body{
      position:absolute;
      inset:0;
      background:
        radial-gradient(520px 220px at 25% 20%, rgba(198,162,90,.14), transparent 60%),
        radial-gradient(520px 240px at 80% 40%, rgba(198,162,90,.10), transparent 65%),
        #fff;
    }
    .env-front{
      position:absolute;
      left:0; right:0; bottom:0;
      height:60%;
      background: linear-gradient(180deg, #fff, #fff4d9);
      border-top: 1px solid rgba(0,0,0,.06);
      clip-path: polygon(0 0, 50% 55%, 100% 0, 100% 100%, 0 100%);
      z-index:3;
    }
    .env-flap{
      position:absolute;
      left:0; right:0; top:0;
      height:62%;
      background: linear-gradient(180deg, #fff, #f8efd6);
      transform-origin: top center;
      transform: rotateX(0deg);
      clip-path: polygon(0 0, 50% 75%, 100% 0, 100% 100%, 0 100%);
      border-bottom: 1px solid rgba(0,0,0,.06);
      z-index:4;
      transition: transform .65s cubic-bezier(.2,.8,.2,1);
    }
    .envelope.open .env-flap{
      transform: rotateX(160deg);
    }

    /* Paper slides out (no ‚ÄúTap‚Ä¶‚Äù text; purely visual) */
    .paper{
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      bottom:18px;
      width:86%;
      height:150px;
      background: #fff;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 22px rgba(0,0,0,.10);
      z-index:2;
      transition: transform .9s cubic-bezier(.15,.9,.2,1), bottom .9s cubic-bezier(.15,.9,.2,1);
    }
    .envelope.open .paper{
      bottom:74px;
      transform: translateX(-50%) translateY(-62px);
    }

    /* Button overlay on top of envelope */
   .env-btn-overlay{
  position:absolute;
  top:30px;           /* sits inside reserved space */
  left:50%;
  transform: translateX(-50%);
  width:min(320px, 92%);
  z-index:10;
}

.env-wrap{
  margin-top:22px;          /* creates breathing room above envelope block */
  padding-top:34px;         /* reserves space for the overlay button */
}
    /* Quiz paper card */
    .paper-card{
      position:relative;
      z-index:2;
      padding:18px 16px 16px;
      border-radius:20px;
      background:
        radial-gradient(500px 220px at 20% 20%, rgba(198,162,90,.12), transparent 62%),
        linear-gradient(180deg, #ffffff, #fff9eb);
      border: 1px solid rgba(198,162,90,.20);
      box-shadow: var(--softShadow);
      overflow:hidden;
    }

    .quiz-title{
      font-size:18px;
      font-weight:900;
      color:var(--ink);
      text-align:center;
      margin-bottom:12px;
    }
    .q{
      font-weight:900;
      margin:10px 0 10px;
      font-size:16px;
      text-align:left;
    }

    .choices{ display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .choice{
      display:flex;
      gap:10px;
      align-items:center;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(31,26,18,.12);
      background:#fff;
      cursor:pointer;
      transition: transform .08s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .choice:hover{
      border-color: rgba(198,162,90,.55);
      box-shadow: 0 12px 20px rgba(198,162,90,.14);
    }
    .choice:active{ transform: scale(.99); }
    .badge{
      width:30px;
      height:30px;
      border-radius:10px;
      background: rgba(198,162,90,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:950;
      color: var(--gold2);
      flex:0 0 auto;
    }
    .choice span{ text-align:left; font-weight:750; }

    .feedback{
      margin-top:12px;
      font-weight:900;
      text-align:center;
      min-height:22px;
    }
    .feedback.good{ color:#1c7a3a; }
    .feedback.bad{ color:#b12258; }

    /* Shake */
    .shake{ animation: shake .32s linear; }
    @keyframes shake{
      0%,100%{ transform: translateX(0); }
      20%{ transform: translateX(-8px); }
      40%{ transform: translateX(8px); }
      60%{ transform: translateX(-6px); }
      80%{ transform: translateX(6px); }
    }

    /* Image reveal: blur -> clear, blocks feel via overlay */
    .answer-media{
      margin-top:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      width:100%;
    }
    .img-wrap{
      width:100%;
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(31,26,18,.10);
      box-shadow: 0 16px 30px rgba(31,26,18,.14);
    }
    .img-wrap img{
      width:100%;
      display:block;
      transform: scale(1.05);
      filter: blur(14px);
      opacity:0;
      transition: filter .75s ease, transform .75s ease, opacity .25s ease;
    }
    .img-wrap.reveal img{
      filter: blur(0px);
      transform: scale(1);
      opacity:1;
    }
    .img-overlay{
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(
          90deg,
          rgba(255,255,255,.28) 0px,
          rgba(255,255,255,.28) 18px,
          rgba(255,255,255,.06) 18px,
          rgba(255,255,255,.06) 36px
        );
      opacity:0;
      transition: opacity .55s ease;
      pointer-events:none;
    }
    .img-wrap.reveal .img-overlay{
      opacity:0; /* ensure it fades away */
    }

    .next-row{ margin-top:14px; }
    .next-row .btn{ width:100%; }

    /* Reveal page image animation */
    .reveal-img{
      width:100%;
      border-radius:22px;
      border:1px solid rgba(31,26,18,.12);
      box-shadow: 0 20px 55px rgba(31,26,18,.22);
      opacity:0;
      transform: translateY(10px) scale(.96);
      filter: blur(14px);
      animation: revealGift 1.15s cubic-bezier(.2,.9,.2,1) forwards;
    }
    @keyframes revealGift{
      40%{
        opacity:1;
        transform: translateY(0) scale(1.02);
      }
      100%{
        opacity:1;
        transform: translateY(0) scale(1);
        filter: blur(0px);
      }
    }

    .final-quip{
      margin-top:14px;
      font-weight:850;
      color: #2a241b;
      text-align:center;
      line-height:1.35;
    }

    /* Emotional message block */
    .emotional{
      margin-top:14px;
      padding:14px 14px;
      border-radius:18px;
      border:1px solid rgba(198,162,90,.35);
      background: linear-gradient(180deg, #fff, #fff6db);
      box-shadow: 0 12px 24px rgba(198,162,90,.12);
      text-align:center;
    }
    .emotional .msg{
      color: var(--wine);
      font-weight:950;
      font-size:16px;
      line-height:1.45;
    }
    .emotional .sig{
      margin-top:10px;
      color:#2a241b;
      font-weight:900;
    }
  </style>
</head>

<body>
  <!-- Floating hearts + poppers -->
  <div class="float-layer" id="floatLayer"></div>

  <div class="wrap">

    <!-- START PAGE -->
    <div class="card" id="pageStart">
      <h1 class="title serif">üéâ <span class="gold">Happy Birthday Baby Doll!</span> üéâ</h1>
      <div class="mail">You‚Äôve got mail‚Ä¶</div>
      <div class="sub">Click below to open your special surprise ü•≥</div>

      <div class="env-wrap">
        <div class="envelope" id="env1">
          <div class="env-body"></div>
          <div class="paper" aria-hidden="true"></div>
          <div class="env-front"></div>
          <div class="env-flap"></div>
        </div>

        <!-- Button ON TOP of envelope -->
        <div class="env-btn-overlay">
          <button class="btn" id="btnOpen">Open Envelope</button>
        </div>
      </div>
    </div>

    <!-- QUIZ PAGE -->
    <div class="card hidden" id="pageQuiz">
      <div class="paper-card" id="paperCard">
        <div class="quiz-title" id="quizTitle">
          Not so quick! üòÜ<br/>Answer these to Unlock Your Gift üéÅ
        </div>

        <div class="q" id="qText"></div>
        <div class="choices" id="choices"></div>

        <div class="feedback" id="feedback"></div>

        <div class="answer-media hidden" id="answerMedia">
          <div class="img-wrap hidden" id="imgWrap">
            <img id="answerImg" alt="memory image" />
            <div class="img-overlay"></div>
          </div>
          <div class="feedback good" id="rightQuote"></div>
        </div>

        <div class="next-row hidden" id="nextRow">
          <button class="btn" id="btnNext">Next</button>
        </div>
      </div>
    </div>

    <!-- FINAL GATE -->
    <div class="card hidden" id="pageGate">
      <h2 class="title serif" style="font-size:26px;">
        <span class="gold">Yayy!! üòÑ</span>
      </h2>
      <div class="sub" style="font-size:16px; color:#2a241b; font-weight:900;">
        Finally!!! You made it!!!! Click here to reveal your gift
      </div>

      <div class="env-wrap" style="margin-top:12px;">
        <div class="envelope" id="env2">
          <div class="env-body"></div>
          <div class="paper" aria-hidden="true"></div>
          <div class="env-front"></div>
          <div class="env-flap"></div>
        </div>

        <!-- Reveal button ON TOP of envelope -->
        <div class="env-btn-overlay">
          <button class="btn" id="btnReveal">Reveal Gift</button>
        </div>
      </div>
    </div>

    <!-- REVEAL PAGE -->
    <div class="card hidden" id="pageReveal">
      <h2 class="title serif" style="font-size:26px;">
        üéÅ <span class="gold">Surprise Unlocked!</span>
      </h2>

      <img class="reveal-img" id="silverImg" alt="Silver Gift" src="images/silver.jpg"/>

      <div class="final-quip">
        See? üôã‚Äç‚ôÄÔ∏è I listen when you talk about long-term value. This one doesn't need a manual and no software updates required üòÜ
      </div>

      <div class="emotional">
        <div class="msg">
          Just like this, you‚Äôre steady, strong, and quietly valuable ‚Äî more than you even realize.
        </div>
        <div class="sig">
          Love you soo much Baby Doll!! Happppy Birthday!!!!! üíõ
        </div>
      </div>
    </div>

  </div>

  <audio id="bgMusic" src="assets/music.mp3" preload="auto" loop></audio>
  <audio id="sfxOpen" src="assets/envelope_open.mp3" preload="auto"></audio>

  <script>
    /***********************
     * QUIZ DATA (final)
     ***********************/
    const questions = [
      {
        text: "1Ô∏è‚É£ What was the color of your dress on your 3rd birthday?",
        choices: ["Black and red frock", "Plain blue dress", "I don‚Äôt remember at all"],
        correctIndex: 0,
        rightQuote: "That beautiful girl with a beautiful pose!",
        wrongQuote: "Uh-oh! Think better!",
        image: "images/q1.jpg"
      },
      {
        text: "2Ô∏è‚É£ What‚Äôs your favorite ‚Äúearly morning‚Äù ritual?",
        choices: ["Self-care routine", "Yoga", "Rubbing your eyes as if they will fall out"],
        correctIndex: 2,
        rightQuote: "Ah! The world famous routine ever!!",
        wrongQuote: "You wish! Now, let‚Äôs talk reality üòÜüòÜ",
        image: "images/q2.jpg"
      },
      {
        text: "3Ô∏è‚É£ Which subject were you secretly terrified of just passing in BTech?",
        choices: ["Advanced Control Systems", "Microprocessors & Microcontrollers", "None ‚Äì I was fearless"],
        correctIndex: 0,
        rightQuote: "Those fearful days, for the entire family üò®",
        wrongQuote: "Wow Sravani! You don‚Äôt even remember!",
        image: "images/q3.jpg"
      },
      {
        text: "4Ô∏è‚É£ What was the first Hindi TV serial we obsessively watched together?",
        choices: ["Iss Pyaar Ko Kya Naam Doon", "Sasural Simar Ka", "Naagin"],
        correctIndex: 1,
        rightQuote: "Sasural simar kaaa‚Ä¶ Sasural simar kaa‚Ä¶ üé∂",
        wrongQuote: "Really Sravani??! You don‚Äôt remember?!",
        image: "images/q4.jpg"
      },
      {
        text: "5Ô∏è‚É£ In which city did we celebrate your bachelorette party?",
        choices: ["Nashville", "Afghanistan", "Zimbabwe"],
        correctIndex: 0,
        rightQuote: "Yo yoo!! ü•≥",
        wrongQuote: "Well, looks like you had a different bachelorette party üòú",
        image: "images/q5.jpg"
      },
      {
        text: "6Ô∏è‚É£ Who gives better life advice and lessons?",
        choices: ["Your sister", "Google", "ChatGPT"],
        correctIndex: 0,
        rightQuote: "Well!! Of course. üòå",
        wrongQuote: "Oh wow!! Good to know your real answer üòÜ Try again!",
        image: "images/q6.jpg"
      },
      {
        text: "Last one‚Ä¶ ‚ú®\nAccording to you, what kind of gift truly stands the test of time?",
        choices: ["Something meaningful and lasting", "Something trendy and flashy", "Something everyone talks about"],
        correctIndex: 0,
        rightQuote: "Agreed! üôÇ",
        wrongQuote: "Hmm‚Ä¶ think like you üòÑ",
        image: null
      }
    ];

    /***********************
     * Elements
     ***********************/
    const $ = (id) => document.getElementById(id);

    const pageStart = $("pageStart");
    const pageQuiz = $("pageQuiz");
    const pageGate = $("pageGate");
    const pageReveal = $("pageReveal");

    const env1 = $("env1");
    const env2 = $("env2");

    const paperCard = $("paperCard");
    const quizTitle = $("quizTitle");
    const qText = $("qText");
    const choicesEl = $("choices");
    const feedbackEl = $("feedback");

    const answerMedia = $("answerMedia");
    const imgWrap = $("imgWrap");
    const answerImg = $("answerImg");
    const rightQuoteEl = $("rightQuote");
    const nextRow = $("nextRow");
    const btnNext = $("btnNext");

    const bgMusic = $("bgMusic");
    const sfxOpen = $("sfxOpen");

    let idx = 0;
    let confettiTimer = null;
    let floatTimer = null;

    /***********************
     * Confetti (continuous)
     ***********************/
    function startContinuousConfetti(){
      if (confettiTimer) return;

      // gold-ish vibe; we can‚Äôt set colors per your request? (You didn‚Äôt forbid it.)
      // We'll keep default colors to avoid any weirdness.
      confettiTimer = setInterval(() => {
        confetti({
          particleCount: 12,
          spread: 65,
          startVelocity: 22,
          origin: { x: Math.random(), y: 0.85 }
        });
      }, 650);
    }

    function miniConfetti(){
      confetti({
        particleCount: 70,
        spread: 110,
        startVelocity: 32,
        origin: { y: 0.65 }
      });
    }

    /***********************
     * Floating hearts + poppers
     ***********************/
    function startFloatingStuff(){
      const layer = $("floatLayer");
      const items = ["üíõ","ü§ç","‚ú®","üéâ","üéä","ü•≥","üíñ"];
      if (floatTimer) return;

      floatTimer = setInterval(() => {
        const el = document.createElement("div");
        el.className = "float";
        el.textContent = items[Math.floor(Math.random()*items.length)];
        el.style.left = Math.floor(Math.random()*100) + "vw";
        el.style.setProperty("--dx", (Math.random()*120 - 60) + "px");
        el.style.animationDuration = (6 + Math.random()*4) + "s";
        el.style.opacity = (0.55 + Math.random()*0.45).toFixed(2);
        el.style.fontSize = (18 + Math.random()*14) + "px";
        layer.appendChild(el);
        setTimeout(() => el.remove(), 11000);
      }, 420);
    }

    /***********************
     * Audio
     ***********************/
    async function startMusic(){
      try {
        bgMusic.volume = 0.55;
        await bgMusic.play();
      } catch {}
    }
    function playOpenSfx(){
      try {
        sfxOpen.currentTime = 0;
        sfxOpen.volume = 0.9;
        sfxOpen.play();
      } catch {}
    }

    /***********************
     * Quiz engine
     ***********************/
    function setQuizTitle(){
      // After 3 questions (i.e., starting Q4), change to "Almost there..."
      if (idx >= 3 && idx < 6){
        quizTitle.innerHTML = "Almost there‚Ä¶ ‚ú®";
      } else if (idx < 3){
        quizTitle.innerHTML = "Not so quick! üòÜ<br/>Answer these to Unlock Your Gift üéÅ";
      } else if (idx === 6){
        // Q7 already has "Last one..." in the question text; keep title minimal
        quizTitle.innerHTML = "Almost done‚Ä¶ üíõ";
      }
    }

    function clearCorrectUI(){
      answerMedia.classList.add("hidden");
      imgWrap.classList.add("hidden");
      imgWrap.classList.remove("reveal");
      answerImg.src = "";
      rightQuoteEl.textContent = "";
      nextRow.classList.add("hidden");
    }

    function renderQuestion(){
      const q = questions[idx];
      setQuizTitle();

      qText.textContent = q.text;
      choicesEl.innerHTML = "";
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";

      clearCorrectUI();

      q.choices.forEach((label, i) => {
        const row = document.createElement("div");
        row.className = "choice";
        row.innerHTML = `<div class="badge">${String.fromCharCode(65 + i)}</div><span>${label}</span>`;
        row.addEventListener("click", () => handleChoice(i));
        choicesEl.appendChild(row);
      });
    }

    function shakePaper(){
      paperCard.classList.remove("shake");
      void paperCard.offsetWidth;
      paperCard.classList.add("shake");
    }

    function handleChoice(choiceIndex){
      const q = questions[idx];

      if (choiceIndex !== q.correctIndex){
        // Wrong: shake + clear image + clear next
        shakePaper();
        clearCorrectUI();

        feedbackEl.textContent = q.wrongQuote;
        feedbackEl.className = "feedback bad";
        return;
      }

      // Correct
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";

      miniConfetti();

      rightQuoteEl.textContent = q.rightQuote;
      answerMedia.classList.remove("hidden");
  
            if (q.image){
        imgWrap.classList.remove("hidden");
      
        // reset reveal state
        imgWrap.classList.remove("reveal");
        answerImg.onload = null;
        answerImg.onerror = null;
      
        // set handlers BEFORE src (fixes cached image issue)
        answerImg.onload = () => {
          requestAnimationFrame(() => imgWrap.classList.add("reveal"));
        };
        answerImg.onerror = () => {
          imgWrap.classList.add("hidden");
          rightQuoteEl.textContent = q.rightQuote + " (Image failed to load)";
        };
      
        // now set src
        answerImg.src = q.image;
      
        // if the image is already cached, force reveal
        if (answerImg.complete) {
          requestAnimationFrame(() => imgWrap.classList.add("reveal"));
        }
      } else {
        imgWrap.classList.add("hidden");
      }


      nextRow.classList.remove("hidden");
      feedbackEl.textContent = "";
    }

    btnNext.addEventListener("click", () => {
      idx++;
      if (idx < questions.length){
        renderQuestion();
      } else {
        pageQuiz.classList.add("hidden");
        pageGate.classList.remove("hidden");
        miniConfetti();
      }
    });

    /***********************
     * Actions
     ***********************/
    $("btnOpen").addEventListener("click", async () => {
      startFloatingStuff();
      startContinuousConfetti();

      playOpenSfx();
      await startMusic();

      env1.classList.add("open");

      setTimeout(() => {
        pageStart.classList.add("hidden");
        pageQuiz.classList.remove("hidden");
        idx = 0;
        renderQuestion();
      }, 900);
    });

    $("btnReveal").addEventListener("click", () => {
      playOpenSfx();
      env2.classList.add("open");
      miniConfetti();

      setTimeout(() => {
        pageGate.classList.add("hidden");
        pageReveal.classList.remove("hidden");

        confetti({ particleCount: 200, spread: 120, startVelocity: 36, origin: { y: 0.65 } });
      }, 850);
    });

    // Start background float immediately (visual only)
    startFloatingStuff();
  </script>
</body>
</html>


